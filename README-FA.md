<div align="center">
  <strong><a href="README.md">English</a></strong> | <strong><a href="README-FA.md">فارسی</a></strong> | <strong><a href="README-CH.md">中文</a></strong>
</div>
<br>

# ربات مدیریت کلادفلر 🐳
یک ربات تلگرامی قدرتمند برای مدیریت کامل رکوردهای DNS، مجهز به دو سیستم کاملاً مستقل **مانیتورینگ و Failover خودکار** و **Load Balancing هوشمند**. این ربات به صورت ۲۴/۷ سرورهای شما را زیر نظر گرفته و در صورت قطعی، ترافیک را به سرورهای بکاپ منتقل می‌کند و یا بین سرورهای سالم توزیع می‌کند تا حداکثر آپ‌تایم و بهترین عملکرد را تجربه کنید.

---
<div align="center">
  <a href="https://www.youtube.com/watch?v=OOQ9rtHqeFQ" target="_blank">
    <img src="https://img.youtube.com/vi/OOQ9rtHqeFQ/hqdefault.jpg" alt="ویدیوی آموزش کامل" width="320">
  </a>
  <p><strong>برای مشاهده ویدیوی کامل آموزش، روی تصویر بالا کلیک کنید</strong></p>
</div>

## ✨ قابلیت‌ها

### 🚀 مانیتورینگ و پایداری پیشرفته
*   ⚡ **مانیتورینگ پرسرعت همزمان**: موتور مانیتورینگ تمام IP های منحصر به فرد در تمام قوانین را به صورت **همزمان** بررسی می‌کند. این قابلیت زمان تشخیص قطعی را از چند دقیقه به تنها چند ثانیه کاهش می‌دهد.
*   🛡️ **Failover خودکار (High Availability)**: به صورت مداوم سرورهای شما را از چندین نقطه در جهان مانیتور کرده و در صورت تشخیص قطعی، رکوردهای DNS را به صورت خودکار به IPهای بکاپ تغییر می‌دهد.
*   🚦 **لود بالانسینگ وزن‌دار پیشرفته**:
    *   **تعیین وزن برای IPها**: به هر IP یک «وزن» عددی اختصاص دهید (مثلاً `1.1.1.1:2`) تا ترافیک بر اساس ظرفیت یا هزینه سرورها، به صورت نسبی توزیع شود.
    *   **دو الگوریتم هوشمند توزیع بار**: استراتژی مورد نظر خود را انتخاب کنید: **تصادفی وزن‌دار** برای ترافیک طبیعی، یا **چرخشی وزن‌دار** برای توزیع دقیق و نوبتی.
*   🔄 **بازگشت خودکار (Auto-Failback)**: پس از پایدار شدن سرور اصلی، ربات به صورت خودکار ترافیک را به آن برمی‌گرداند.
*   ⚙️ **مدیریت کامل در ربات**: تمام سیاست‌های Failover و Load Balancing به صورت کاملاً مجزا (افزودن، ویرایش، حذف) از طریق منوی تنظیمات قابل مدیریت هستند.

### ⚙️ مدیریت پیشرفته DNS و تجربه کاربری
*   **📤 انتقال و کپی رکورد بین دامنه‌ها**: به راحتی یک رکورد DNS را از یک دامنه به دامنه دیگر، حتی **بین اکانت‌های مختلف کلادفلر**، مستقیماً از داخل ربات منتقل کنید. انتخاب کنید که رکورد فقط کپی شود یا به طور کامل منتقل (حذف از مبدأ) شود.
*   **🔄 تبدیل نوع رکورد**: نوع یک رکورد موجود را (مثلاً از `CNAME` به `A`) بدون نیاز به حذف و ایجاد مجدد، به صورت آنی تغییر دهید.
*   **🎨 رابط کاربری بازطراحی شده (HTML)**: مهاجرت کامل به فرمت HTML برای تمام پیام‌ها، که منجر به یک رابط کاربری تمیز، حرفه‌ای و بدون کاراکترهای اضافی شده و خوانایی را به شدت بهبود بخشیده است.
*   **👥 پشتیبانی از چند ادمین و چند اکانت**: به چندین کاربر اجازه مدیریت دهید و رکوردهای DNS را در چندین اکانت کلادفلر مدیریت کنید.
*   **🐳 نصب آسان با داکر**: ربات را با یک اسکریپت نصب تمام اتوماتیک در چند دقیقه راه‌اندازی کنید.
*   **👥 عملیات گروهی**: چندین رکورد را به صورت همزمان حذف یا IP آن‌ها را تغییر دهید.
*   **💾 پشتیبان‌گیری و بازیابی**: از رکوردهای دامنه‌های خود بکاپ `.json` تهیه و بازیابی کنید.
*   **🌍 دو زبانه**: پشتیبانی کامل از زبان‌های فارسی و انگلیسی.

---

<div align="center">
  <h3>💖 حمایت از پروژه</h3>
  <p>اگر این پروژه برای شما مفید بوده است، لطفاً با دادن یک ستاره در گیت‌هاب از آن حمایت کنید!</p>
  <a href="https://github.com/ExPLoSiVe1988/cloudflare-telegram-bot/stargazers">
    <img src="https://img.shields.io/github/stars/ExPLoSiVe1988/cloudflare-telegram-bot?style=for-the-badge&logo=github&color=FFDD00&logoColor=black" alt="به پروژه در گیت‌هاب ستاره دهید">
  </a>
</div>


## 🚀 نصب و راه‌اندازی

این ربات برای اجرا با داکر طراحی شده است. اسکریپت ارائه شده، تمام مراحل راه‌اندازی را به صورت خودکار انجام می‌دهد.

### نصب اتوماتیک

شما می‌توانید آخرین نسخه پایدار یا نسخه در حال توسعه را نصب کنید. برای اکثر کاربران، **نصب آخرین نسخه پایدار** توصیه می‌شود.
```bash
bash <(curl -s https://raw.githubusercontent.com/ExPLoSiVe1988/cloudflare-telegram-bot/main/install.sh)
```
دستور زیر را در ترمینال سرور خود اجرا کنید. لطفاً `<VERSION>` را با آخرین شماره نسخه موجود در صفحه [Releases](https://github.com/ExPLoSiVe1988/cloudflare-telegram-bot/releases) جایگزین کنید (مثلاً `v4.1.2`).
```bash
bash <(curl -s https://raw.githubusercontent.com/ExPLoSiVe1988/cloudflare-telegram-bot/<VERSION>/install.sh)
```
اسکریپت یک منوی مدیریتی کامل در اختیار شما قرار می‌دهد:
*   **Install or Reinstall Bot:** ریپازیتوری را دانلود کرده، به شما اجازه می‌دهد نسخه مورد نظر (آخرین یا پایدار) را انتخاب کنید، تنظیمات اولیه (`.env`) را از شما می‌پرسد و ربات را با Docker Compose نصب و اجرا می‌کند.
*   **Update Bot from GitHub:** آخرین کدها را از گیت‌هاب دریافت می‌کند. برای اعمال آپدیت، شما باید پس از آن گزینه "Install or Reinstall Bot" را مجدداً اجرا کنید.
*   **Edit Core Configuration (.env):** یک ویرایشگر متنی باز می‌کند تا بتوانید تنظیمات اصلی ربات (توکن‌ها و ادمین‌ها) را در هر زمان ویرایش کنید.
*   **View Live Logs:** لاگ‌های زنده ربات را برای نظارت و اشکال‌زدایی نمایش می‌دهد.
*   **Stop Bot / Start Bot:** به شما اجازه می‌دهد کانتینر ربات را بدون حذف داده‌ها، متوقف یا راه‌اندازی مجدد کنید.
*   **Remove Bot Completely:** کانتینر را متوقف کرده و تمام داده‌ها، فایل‌های کانفیگ، کانتینرها و ایمیج‌های مرتبط را به طور کامل حذف می‌کند.

---

## ⚙️ تنظیمات

اسکریپت نصب یک فایل `.env` با ساختار زیر برای شما ایجاد می‌کند. شما می‌توانید بعداً با استفاده از گزینه "Edit Configuration" در اسکریپت، آن را مدیریت کنید.

*   `TELEGRAM_ADMIN_IDS`: لیستی از آیدی‌های عددی کاربران تلگرام (جدا شده با کاما) که مجاز به استفاده از ربات هستند.
*   `CF_ACCOUNTS`: لیستی از اکانت‌های کلادفلر شما (جدا شده با کاما) با فرمت `Nickname1:Token1,Nickname2:Token2`. نیک‌نیم یک نام دلخواه است که شما برای هر اکانت انتخاب می‌کنید.
*   `TELEGRAM_BOT_TOKEN`: توکن API ربات تلگرام شما از @BotFather.

---

## 🤖 مدیریت ربات

اگر ترجیح می‌دهید مستقیماً از دستورات استفاده کنید، وارد پوشه پروژه (`cloudflare-telegram-bot`) شده و از دستورات `docker-compose` زیر استفاده کنید:

| عملکرد | دستور |
| :--- | :--- |
| **مشاهده لاگ زنده** | `docker-compose logs -f` |
| **آپدیت به آخرین نسخه** | `docker-compose pull && docker-compose up -d` |
| **توقف و حذف کانتینر** | `docker-compose down` |

---

### دسترسی‌های مورد نیاز توکن API
برای هر اکانت کلادفلر، توکن API شما به دسترسی‌های زیر نیاز دارد:

| نوع (Type) | منبع (Resource) | دسترسی (Access) |
| :--- | :--- | :--- |
| **Zone** | **DNS** | `Edit` |
| **Zone** | **Zone** | `Read` |

به صفحه [API Tokens](https://dash.cloudflare.com/profile/api-tokens) بروید و یک توکن سفارشی با این دو دسترسی که برای `All zones` فعال شده باشد، بسازید.

---

### 👨‍💻 توسعه‌دهنده و حمایت مالی
*   گیت‌هاب: [@ExPLoSiVe1988](https://www.google.com/url?sa=E&q=https%3A%2F%2Fgithub.com%2FExPLoSiVe1988%2Fcloudflare-telegram-bot)
*   تلگرام: [@H_ExPLoSiVe](https://t.me/H_ExPLoSiVe)
*   کانال تلگرام: [@Botgineer](https://t.me/Botgineer)
---
### 💖 حمایت مالی (Donate)
اگر این پروژه برای شما مفید بوده است، با حمایت مالی خود به توسعه آن کمک کنید:

| نوع ارز | آدرس |
|:---|:---|
| 🟣 **اتریوم (ETH - ERC20)** | `0x157F3Eb423A241ccefb2Ddc120eF152ce4a736eF` |
| 🔵 **ترون (TRX - TRC20)** | `TEdu5VsNNvwjCRJpJJ7zhjXni8Y6W5qAqk` |
| 🟢 **تتر (USDT - TRC20)** | `TN3cg5RM5JLEbnTgK5CU95uLQaukybPhtR` |

🙏 از حمایت شما سپاسگزارم! 🚀
