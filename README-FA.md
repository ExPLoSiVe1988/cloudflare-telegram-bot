<!-- English README link -->
<div align="left">
  <a href="README.md">🇬🇧 English Version</a>
</div>

# ربات تلگرامی کلادفلر
یک ربات تلگرامی قدرتمند و حرفه‌ای برای مدیریت کامل رکوردهای DNS کلودفلر. این نسخه به طور کامل با **داکر (Docker)** ارائه شده تا نصب، اجرا و مدیریت آن آسان، سریع و ایزوله باشد.

---
🎥 [مشاهده ویدیوی آموزش کامل نصب و راه‌اندازی در YouTube](https://www.youtube.com/watch?v=OOQ9rtHqeFQ)
---

## ✨ قابلیت‌ها
*   **🐳 نصب آسان با داکر:** ربات را با یک اسکریپت نصب تمام اتوماتیک در چند دقیقه راه‌اندازی کنید.
*   **🌐 پشتیبانی از چند دامنه:** ربات به طور خودکار تمام دامنه‌های شما را شناسایی کرده و امکان مدیریت همزمان آن‌ها را فراهم می‌کند.
*   **🚀 هسته کاملاً ناهمزمان:** برای یک رابط کاربری سریع و روان، ربات با `httpx` بازنویسی شده است.
*   **👥 عملیات گروهی:** چندین رکورد را انتخاب کرده و به صورت همزمان حذف یا IP آن‌ها را تغییر دهید.
*   **🔎 جستجوی فوری و صفحه‌بندی:** رکوردهای خود را به سرعت پیدا کرده و به راحتی در لیست‌های طولانی جابجا شوید.
*   **☁️ تغییر وضعیت پروکسی:** وضعیت پروکسی کلادفلر (ابر نارنجی/خاکستری) را با یک کلیک تغییر دهید.
*   **🔄 دکمه بازخوانی:** لیست رکوردها را فوراً از کلادفلر بازخوانی کنید تا تغییرات خارجی را مشاهده کنید.
*   **💾 پشتیبان‌گیری و بازیابی:** از رکوردهای هر یک از دامنه‌های خود بکاپ `json.` تهیه و بازیابی کنید.
*   **🌍 دو زبانه:** پشتیبانی کامل از زبان‌های فارسی و انگلیسی.

---

## 🚀 نصب و راه‌اندازی

این ربات برای اجرا با داکر طراحی شده است. اسکریپت ارائه شده، تمام مراحل راه‌اندازی را به صورت خودکار انجام می‌دهد.

### پیش‌نیازها
*   یک سرور لینوکس (توصیه: اوبونتو/دبیان).
*   ابزارهای `git` و `curl` (معمولاً از پیش نصب هستند).

### نصب اتوماتیک
دستور زیر را در ترمینال سرور خود اجرا کنید. اسکریپت همه کارها، شامل نصب داکر در صورت نیاز را، انجام خواهد داد.
```bash
bash <(curl -s https://raw.githubusercontent.com/ExPLoSiVe1988/cloudflare-telegram-bot/main/install.sh)
```
اسکریپت یک منو برای مدیریت ربات در اختیار شما قرار می‌دهد:
*   **Install Bot:** ریپازیتوری را دانلود کرده، توکن‌های API را از شما می‌پرسد و ربات را با Docker Compose اجرا می‌کند.
*   **Update Bot:** آخرین نسخه کد را از گیت‌هاب دریافت کرده و ایمیج داکر را مجدداً بیلد می‌کند.
*   **View Live Logs:** لاگ‌های زنده ربات را برای نظارت نمایش می‌دهد.
*   **Remove Bot Completely:** کانتینر را متوقف کرده و تمام داده‌ها، کانتینرها و ایمیج‌های مرتبط را حذف می‌کند.

---
## دستورات ربات
| دستور | توضیح |
|:---|:---|
| `/start` | شروع به کار ربات و نمایش منوی انتخاب زبان |
| `/language` | انتخاب زبان مورد نظر (فارسی/انگلیسی) |
| `/list` | ورود به منوی اصلی و نمایش لیست رکوردها (با صفحه‌بندی) |
| `/search`| جستجوی یک رکورد بر اساس نام |
| `/bulk` | ورود به حالت عملیات گروهی (انتخاب چندتایی) |
| `/add` | شروع فرآیند ثبت ساب‌دامین جدید |
| `/backup` | بکاپ گرفتن از کل رکوردها |
| `/restore`| بازگردانی رکوردهای پاک شده |

## 🔄 آیا از نسخه قبلی استفاده می‌کنید؟

➡️ **لطفاً راهنمای مهاجرت در انتهای این فایل را مطالعه کنید.**

---

## 🤖 مدیریت ربات

اسکریپت نصب یک منوی آسان برای مدیریت در اختیار شما قرار می‌دهد. اگر ترجیح می‌دهید مستقیماً از دستورات استفاده کنید، وارد پوشه پروژه (`cloudflare-telegram-bot`) شده و از دستورات `docker-compose` زیر استفاده کنید:

| عملکرد | دستور |
| :--- | :--- |
| **مشاهده لاگ زنده** | `docker-compose logs -f` |
| **متوقف کردن ربات** | `docker-compose stop` |
| **شروع مجدد ربات** | `docker-compose start` |
| **آپدیت (بعد از `git pull`)** | `docker-compose up --build -d` |
| **توقف و حذف کانتینر** | `docker-compose down` |

---

### دسترسی‌های مورد نیاز توکن API
برای عملکرد صحیح ربات، توکن API شما به دسترسی‌های زیر نیاز دارد:

| نوع (Type) | منبع (Resource) | دسترسی (Access) |
| :--- | :--- | :--- |
| **Zone** | **DNS** | `Edit` |
| **Zone** | **Zone** | `Read` |

به صفحه [API Tokens](https://dash.cloudflare.com/profile/api-tokens) بروید و یک توکن سفارشی با این دو دسترسی که برای `All zones` فعال شده باشد، بسازید.

---

## 🔄 راهنمای مهاجرت برای کاربران قدیمی (از نسخه PM2)

این نسخه ساختار ربات را به طور کامل از `PM2` به یک سیستم بسیار پایدارتر مبتنی بر **داکر** تغییر داده است. به دلیل این تغییر بنیادی، گزینه "Update Bot" در اسکریپت قدیمی **کار نخواهد کرد**.

برای ارتقا، شما باید یک نصب تمیز انجام دهید. لطفاً مراحل ساده زیر را دنبال کنید:

**مرحله ۱: حذف کامل نسخه قدیمی**

ابتدا اسکریپت نصب قدیمی خود را اجرا کنید تا نسخه PM2 به طور کامل حذف شود.
```bash
# به پوشه ربات قدیمی خود بروید
cd cloudflare-telegram-bot 
# اسکریپت قدیمی را اجرا کنید
bash install.sh
# از منو، گزینه "Delete Bot" را انتخاب کنید.
```
اگر اسکریپت قدیمی را ندارید، می‌توانید با دستورات زیر آن را به صورت دستی حذف کنید:
```bash
pm2 delete cfbot && pm2 save && cd ~ && rm -rf cloudflare-telegram-bot
```

**مرحله ۲: نصب نسخه جدید داکر**

حالا کافیست دستور نصب جهانی جدید را از پوشه home خود (`~`) اجرا کنید:
```bash
bash <(curl -s https://raw.githubusercontent.com/ExPLoSiVe1988/cloudflare-telegram-bot/main/install.sh)
```
اسکریپت جدید شما را در فرآیند نصب تازه راهنمایی خواهد کرد. از اینکه ربات خود را ارتقا دادید سپاسگزاریم!

---
### 👨‍💻 توسعه‌دهنده و حمایت مالی
*   GitHub: [@ExPLoSiVe1988](https://github.com/ExPLoSiVe1988)
*   Telegram: [t.me/H_ExPLoSiVe](https://t.me/H_ExPLoSiVe)
---

### 💖 حمایت مالی (Donate)
اگر این پروژه برای شما مفید بوده است، با حمایت مالی خود به توسعه آن کمک کنید:

| Cryptocurrency | Address |
|:---|:---|
| 🟣 **اتریوم (ETH - ERC20)** | `0x157F3Eb423A241ccefb2Ddc120eF152ce4a736eF` |
| 🔵 **ترون (TRX - TRC20)** | `TEdu5VsNNvwjCRJpJJ7zhjXni8Y6W5qAqk` |
| 🟢 **تتر (USDT - TRC20)** | `TN3cg5RM5JLEbnTgK5CU95uLQaukybPhtR` |

🙏 از حمایت شما سپاسگزارم! 🚀
